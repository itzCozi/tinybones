---
import { NAV_LINKS, SITE } from "@/siteConfig.ts";
import Search from "./Search.astro";
---

<header
  class="fixed top-0 left-0 right-0 z-10 bg-bg dark:bg-dark-bg border-b border-neutral-200 dark:border-neutral-800"
>
  <div
    class="mx-auto flex max-w-screen-lg flex-wrap items-center justify-between p-2 pb-2 font-sans sm:py-3 sm:px-5"
  >
    <div class="flex justify-between items-center w-full md:w-auto">
      <a
        href="/"
        class="text-xl font-bold text-black sm:text-xl dark:text-white"
        >{SITE.title}</a
      >
      <div class="block md:hidden">
        <button id="mobile-menu-button" aria-label="Menu" class="text-black dark:text-white">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>
    
    <div class="hidden md:block w-full md:w-auto">
      <Search />
    </div>
    
    <nav id="mobile-menu" class="hidden md:flex flex-col md:flex-row items-start md:items-center w-full md:w-auto mt-4 md:mt-0">
      <div class="block md:hidden w-full mb-4">
        <Search />
      </div>
      <ul class="flex flex-col md:flex-row list-none items-start md:items-center gap-4 md:gap-5 p-0 md:mr-4 w-full md:w-auto">
        {
          Object.keys(NAV_LINKS).map((navItemKey) => {
            return (
              <li>
                <a href={NAV_LINKS[navItemKey].path} class="nav-link block py-1">
                  {NAV_LINKS[navItemKey].label}
                </a>
              </li>
            );
          })
        }
      </ul>
    </nav>
  </div>
</header>

<style>
  #mobile-menu.show {
    display: flex;
  }
</style>

<script>
  // Mobile menu toggle functionality
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  
  if (mobileMenuButton && mobileMenu) {
    mobileMenuButton.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      mobileMenu.classList.toggle('show');
    });
  }
</script>
