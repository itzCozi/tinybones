---
import { getCollection } from "astro:content";
import BaseLayout from "@/layouts/BaseLayout.astro";
import Projects from "@/components/Projects.astro";
import SeoPage from "@/components/SeoPage.astro";

export async function getStaticPaths() {
  const allProjects = await getCollection("projects");
  const pageSize = 5;
  const totalPages = Math.ceil(allProjects.length / pageSize);

  const paths = [];
  for (let i = 2; i <= totalPages; i++) {
    paths.push({
      params: { page: i.toString() },
      props: { currentPage: i, totalPages },
    });
  }

  return paths;
}

const { currentPage } = Astro.props;
---

<BaseLayout>
  <SeoPage
    slot="head"
    title={`Projects - pg${currentPage}`}
  />
  <Projects
    {currentPage}
    showPagination={true}
    baseUrl="/projects"
  />
</BaseLayout>
